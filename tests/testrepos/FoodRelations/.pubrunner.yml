name: FoodRelations
version: 0.1
mode: incremental
resources:
   all:
      - PUBCHEM
      - FOODON
   main:
      - PUBMED:
         format: bioc
      - AGRICOLA:
         format: bioc
      - PMCOA:
        format: bioc
   test:
      - PUBMED_TWOFILES:
        rename: PUBMED
        format: bioc
      - AGRICOLA_TWOFILES:
        rename: AGRICOLA
        format: bioc
      - PMCOA_TWOFILES:
        rename: PMCOA
        format: bioc
build:
   - python generateChemTerms.py --pubChemPMIDsFile {PUBCHEM}/CID-PMID --pubChemSynonymsFile {PUBCHEM}/CID-Synonym-filtered --outFile {CHEMICAL.JSON}
   - python extractFoodOnTerms.py --owlFiles {FOODON}/imports/langual_import.owl,{FOODON}/imports/ncbitaxon_import.owl,{FOODON}/imports/foodon_product_import.owl,?FOODON/imports/product_type_import.owl --outFile {FOOD.JSON}
run:
   - mkdir {TMPDIR}
   - python cooccurrenceExtractor.py --biocFile {AGRICOLA}/{IN:*.xml} --wordlist1 {FOOD.JSON} --wordlist2 {CHEMICAL.JSON} --outFile {TMPDIR}/{OUT:*.cooccurrences}
   - python combineCooccurrences.py --inDir {TMPDIR} --outFile {RESULTS.TXT}
output: {RESULTS.TXT}

